!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="../dist/",i(i.s=6)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.d(e,"a",function(){return p});var r=i(4),n=i.n(r);
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var u=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e,i,r,n=this.listeners[t];if(n)if(2===arguments.length)for(i=n.length,e=0;e<i;++e)n[e].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=n.length,e=0;e<i;++e)n[e].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),o=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return s(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(u),c=function(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},n=i.length;n--;)""!==i[n]&&((e=/([^=]*)=(.*)/.exec(i[n]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),r[e[0]]=e[1]);return r},f=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}s(e,t);var i=e.prototype;return i.push=function(t){var e,i,r=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(function(e,i){var r=i(t);return r===t?e:e.concat([r])},[t]).forEach(function(t){for(var n=0;n<r.customParsers.length;n++)if(r.customParsers[n].call(r,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void r.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void r.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void r.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var a=c(e[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),u=s[0],o=s[1];i.byterange={},u&&(i.byterange.length=parseInt(u,10)),o&&(i.byterange.offset=parseInt(o,10))}}r.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=c(e[1]),i.attributes.RESOLUTION){var f=i.attributes.RESOLUTION.split("x"),d={};f[0]&&(d.width=parseInt(f[0],10)),f[1]&&(d.height=parseInt(f[1],10)),i.attributes.RESOLUTION=d}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}r.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=c(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))r.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=c(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void r.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=c(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);r.trigger("data",{type:"tag",data:t.slice(4)})}}}else r.trigger("data",{type:"comment",text:t.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,r=t.customType,n=t.dataParser,a=t.segment;"function"!=typeof n&&(n=function(t){return t}),this.customParsers.push(function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:n(t),customType:r,segment:a}),!0})},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push(function(t){return e.test(t)?i(t):t})},e}(u);function d(t){for(var e=n.a.atob(t||""),i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}var p=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new o,e.parseStream=new f,e.lineStream.pipe(e.parseStream);var i,r,n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e),s=[],u={},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var e,o;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(u.byterange=e,e.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(u.byterange=e,e.offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(u.duration=t.duration),0===t.duration&&(u.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:d(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,p=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes?(u.attributes||(u.attributes={}),a(u.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(o={default:/yes/i.test(t.attributes.DEFAULT)}).default?o.autoselect=!0:o.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(o.language=t.attributes.LANGUAGE),t.attributes.URI&&(o.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(o.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(o.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(o.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=o}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1,u.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),u.dateTimeString=t.dateTimeString,u.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){u.cueOut=t.data},"cue-out-cont":function(){u.cueOutCont=t.data},"cue-in":function(){u.cueIn=t.data}}[t.tagType]||function(){}).call(n)},uri:function(){u.uri=t.uri,s.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),r&&(u.key=r),u.timeline=p,i&&(u.map=i),u={}},comment:function(){},custom:function(){t.segment?(u.custom=u.custom||{},u.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(n)}),e}s(e,t);var i=e.prototype;return i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(u)},function(t,e,i){(function(e){var i;i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=i}).call(this,i(2))},function(t,e,i){"use strict";var r=i(0),n=i.n(r),a=i(1),s=i.n(a),u=function(){function t(e,i){n()(this,t),this.subtle=e,this.aesIV=i}return s()(t,[{key:"decrypt",value:function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)}}]),t}(),o=function(){function t(e,i){n()(this,t),this.subtle=e,this.key=i}return s()(t,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),t}();var c=function(){function t(){n()(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return s()(t,[{key:"uint8ArrayToUint32Array_",value:function(t){for(var e=new DataView(t),i=new Uint32Array(4),r=0;r<4;r++)i[r]=e.getUint32(4*r);return i}},{key:"initTable",value:function(){var t=this.sBox,e=this.invSBox,i=this.subMix,r=i[0],n=i[1],a=i[2],s=i[3],u=this.invSubMix,o=u[0],c=u[1],f=u[2],d=u[3],p=new Uint32Array(256),l=0,g=0,y=0;for(y=0;y<256;y++)p[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var h=g^g<<1^g<<2^g<<3^g<<4;h=h>>>8^255&h^99,t[l]=h,e[h]=l;var b=p[l],m=p[b],v=p[m],E=257*p[h]^16843008*h;r[l]=E<<24|E>>>8,n[l]=E<<16|E>>>16,a[l]=E<<8|E>>>24,s[l]=E,E=16843009*v^65537*m^257*b^16843008*l,o[h]=E<<24|E>>>8,c[h]=E<<16|E>>>16,f[h]=E<<8|E>>>24,d[h]=E,l?(l=b^p[p[p[v^b]]],g^=p[p[g]]):l=g=1}}},{key:"expandKey",value:function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,r=0;r<e.length&&i;)i=e[r]===this.key[r],r++;if(!i){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,s,u,o,c=this.ksRows=4*(n+6+1),f=this.keySchedule=new Uint32Array(c),d=this.invKeySchedule=new Uint32Array(c),p=this.sBox,l=this.rcon,g=this.invSubMix,y=g[0],h=g[1],b=g[2],m=g[3];for(a=0;a<c;a++)a<n?u=f[a]=e[a]:(o=u,a%n==0?(o=p[(o=o<<8|o>>>24)>>>24]<<24|p[o>>>16&255]<<16|p[o>>>8&255]<<8|p[255&o],o^=l[a/n|0]<<24):n>6&&a%n==4&&(o=p[o>>>24]<<24|p[o>>>16&255]<<16|p[o>>>8&255]<<8|p[255&o]),f[a]=u=(f[a-n]^o)>>>0);for(s=0;s<c;s++)a=c-s,o=3&s?f[a]:f[a-4],d[s]=s<4||a<=4?o:y[p[o>>>24]]^h[p[o>>>16&255]]^b[p[o>>>8&255]]^m[p[255&o]],d[s]=d[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}},{key:"decrypt",value:function(t,e,i,r){for(var n,a,s,u,o,c,f,d,p,l,g,y,h,b,m,v,E,T=this.keySize+6,S=this.invKeySchedule,I=this.invSBox,w=this.invSubMix,A=w[0],O=w[1],x=w[2],U=w[3],R=this.uint8ArrayToUint32Array_(i),C=R[0],X=R[1],M=R[2],k=R[3],N=new Int32Array(t),D=new Int32Array(N.length),F=this.networkToHostOrderSwap;e<N.length;){for(p=F(N[e]),l=F(N[e+1]),g=F(N[e+2]),y=F(N[e+3]),o=p^S[0],c=y^S[1],f=g^S[2],d=l^S[3],h=4,b=1;b<T;b++)n=A[o>>>24]^O[c>>16&255]^x[f>>8&255]^U[255&d]^S[h],a=A[c>>>24]^O[f>>16&255]^x[d>>8&255]^U[255&o]^S[h+1],s=A[f>>>24]^O[d>>16&255]^x[o>>8&255]^U[255&c]^S[h+2],u=A[d>>>24]^O[o>>16&255]^x[c>>8&255]^U[255&f]^S[h+3],o=n,c=a,f=s,d=u,h+=4;n=I[o>>>24]<<24^I[c>>16&255]<<16^I[f>>8&255]<<8^I[255&d]^S[h],a=I[c>>>24]<<24^I[f>>16&255]<<16^I[d>>8&255]<<8^I[255&o]^S[h+1],s=I[f>>>24]<<24^I[d>>16&255]<<16^I[o>>8&255]<<8^I[255&c]^S[h+2],u=I[d>>>24]<<24^I[o>>16&255]<<16^I[c>>8&255]<<8^I[255&f]^S[h+3],h+=3,D[e]=F(n^C),D[e+1]=F(u^X),D[e+2]=F(s^M),D[e+3]=F(a^k),C=p,X=l,M=g,k=y,e+=4}return r?(m=D.buffer,v=m.byteLength,(E=v&&new DataView(m).getUint8(v-1))?m.slice(0,v-E):m):D.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),t}();var f="undefined"==typeof window?self:window,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).removePKCS7Padding,r=void 0===i||i;if(n()(this,t),this.logEnabled=!0,this.config=e,this.removePKCS7Padding=r,r)try{var a=f.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return s()(t,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(t,e,i,r){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new c),a.expandKey(e),r(a.decrypt(t,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(this.logEnabled=!1);var s=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new o(s,e)),this.fastAesKey.expandKey().then(function(a){new u(s,i).decrypt(t,a).catch(function(a){n.onWebCryptoError(a,t,e,i,r)}).then(function(t){r(t)})}).catch(function(a){n.onWebCryptoError(a,t,e,i,r)})}}},{key:"onWebCryptoError",value:function(t,e,i,r,n){this.config.enableSoftwareAES?(console.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,i,r,n)):console.error("decrypting error : ".concat(t.message))}},{key:"destroy",value:function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)}}]),t}();e.a=d},function(t,e,i){"use strict";i.r(e),function(t){var r=i(5),n=i(3),a=function(t){var e=new r.a({enableSoftwareAES:!0});function i(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0,n=t.length;r<n;r++)i[r]=t.charCodeAt(r);return e}function a(t){for(var e="",i=0;i<t.length;i++)e+=""+t.charCodeAt(i).toString(16);return e}function s(t){return String.fromCharCode.apply(null,new Uint8Array(t))}return{currentSource:void 0,currentSrc:void 0,currentChunk:void 0,hasNativeHlsPlayback:function(t){if(t&&t.plugins&&t.plugins instanceof Array&&-1!==t.plugins.indexOf("hls"))return!1;for(var e=document.createElement("video"),i=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],r=0;r<i.length;r++)if(/maybe|probably/i.test(e.canPlayType(i[r])))return!0;return!1}(t),ab2str:s,getFileByUrl:function(r,u){var o=this,c=t.options().aes,f=r.src,d=f.replace(/[^\/]+$/,"");this.currentSrc=f,this.currentChunk={src:f+"?decrypted",type:r.type},("undefined"!=typeof videojs?videojs.xhr:xhr)({uri:f,responseType:"arraybuffer"},function(t,f,p){if(t)return console.error("Error in retrieving file",t),void u(null,r);e.decrypt(p,i(c.key),i(c.iv),function(t){if(!o.hasNativeHlsPlayback){var f=o;l=XMLHttpRequest.prototype.open,g=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function(t,e,i,r,n){e.match(/\.(m3u8)$/i)&&(e=e.replace(/^(data:application\/|blob:)/i,d),f.currentChunk.src=e+"?decrypted",this.aesEncoded=!0),l.apply(this,[t,e,i,r,n])},XMLHttpRequest.prototype.send=function(t){var n,u=this;this.aesEncoded&&(this.responseType="arraybuffer",n=this.onreadystatechange,u.onreadystatechange=function(t){u.readyState===XMLHttpRequest.DONE&&200===u.status?e.decrypt(u.response,i(c.key),i(c.iv),function(t){var e=s(t);e=(e=e.replace(/^#EXTINF/im,'#EXT-X-KEY:METHOD=AES-128,URI="data:text/plain;charset=utf-8,'+c.key+'",IV=0x'+a(c.iv)+"\r\n#EXTINF")).replace(/^(#EXTINF:[\0-\uFFFF]+?,[\n\r]+)/gim,"$1"+d);var i={responseType:"text",readyState:XMLHttpRequest.DONE,response:e,responseText:e,status:u.status,responseURL:u.responseURL};f.currentSource&&URL.revokeObjectURL(f.currentSource),f.currentSource={src:URL.createObjectURL(new Blob([e],{type:r.type})),type:r.type},n.apply(u,[{currentTarget:i}])}):n.apply(u,[t])}),g.apply(this,arguments)},o.currentSource&&URL.revokeObjectURL(o.currentSource);var p=s(t);return p=(p=(p=p.replace(/^#EXTINF/im,'#EXT-X-KEY:METHOD=AES-128,URI="data:text/plain;charset=utf-8,'+c.key+'",IV=0x'+a(c.iv)+"\r\n#EXTINF")).replace(/^(#EXTINF:[\0-\uFFFF]+?,[\n\r]+)/gim,"$1"+d)).replace(/^(#EXT\x2DX\x2DSTREAM\x2DINF:[\0-\uFFFF]+?[\n\r]+)/gim,"$1"+d),o.currentSource={src:URL.createObjectURL(new Blob([p],{type:r.type})),type:r.type},void u(null,o.currentSource)}var l,g,y=new n.a;if(y.push(s(t)),y.end(),y.manifest&&y.manifest.playlists&&y.manifest.playlists.length){var h=y.manifest.playlists.shift();o.getFileByUrl({type:r.type,src:r.src.replace(/\/[^\/]+$/,"/"+h.uri)},u)}else{if(!(y.manifest&&y.manifest.segments&&y.manifest.segments.length))throw new Error("Decoded wrong m3u8 manifest");var b=s(t),m=r.src.replace(/\/[^\/]+$/,"/");b=(b=b.replace(/^#EXTINF/im,'#EXT-X-KEY:METHOD=AES-128,URI="data:text/plain;charset=utf-8,'+c.key+'",IV=0x'+a(c.iv)+"\r\n#EXTINF")).replace(/^(#EXTINF:[\0-\uFFFF]+?,[\n\r]+)/gim,"$1"+m),o.currentSource&&URL.revokeObjectURL(o.currentSource),o.currentSource={src:URL.createObjectURL(new Blob([b],{type:r.type})),type:r.type},u(null,o.currentSource)}})})},setSource:function(e,i){var r=this;!t.options().aes||e.src.match(/^(data:application\/|blob:)/)||e.src.match(/\?decrypted/)?(e.src=e.src.replace(/\?decrypted/,""),i(null,e)):(this.getFileByUrl(e,i),t.currentSrc=function(){return r.currentSrc},t.currentSource=function(){return r.currentSource},t.currentSources=function(){return[r.currentChunk]})}}};"undefined"!=typeof videojs&&videojs.use("*",a),a.VERSION="__VERSION__",e.default=a}.call(this,i(2))}]);